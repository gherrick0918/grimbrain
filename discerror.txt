2025-09-22 11:48:49.684 [info] Experiment 'pythonSurveyNotification' is active
2025-09-22 11:48:49.684 [info] Native locator: Refresh started
2025-09-22 11:48:49.685 [info] Native locator: Refresh started
2025-09-22 11:48:49.685 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-22 11:48:54.433 [info] > pyenv which python
2025-09-22 11:48:54.433 [info] cwd: .
2025-09-22 11:48:56.470 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-22 11:48:56.856 [info] Native locator: Refresh finished in 9031 ms
2025-09-22 11:49:23.709 [info] Starting Pylance language server.
2025-09-22 11:56:20.749 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pkg_resources\tests\data\my-test-package-source\setup.cfg
2025-09-22 11:56:20.775 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-22 11:56:20.777 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-409a6aca777231035bf5
2025-09-22 11:56:20.899 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-22 11:56:20.899 [info] shell: commandPrompt
2025-09-22 11:56:21.137 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-22 11:56:21.137 [info] cwd: .
2025-09-22 11:57:04.142 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\numpy\f2py\setup.cfg
2025-09-22 11:57:04.212 [error] Test discovery already in progress, not starting a new one.
2025-09-22 11:57:16.583 [info] tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves

2025-09-22 11:57:16.583 [info] tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative

2025-09-22 11:57:16.583 [info] tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables

2025-09-22 11:57:16.583 [info] tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
2025-09-22 11:57:16.583 [info] 
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty

2025-09-22 11:57:16.583 [info] tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
2025-09-22 11:57:16.584 [info] 
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
2025-09-22 11:57:16.584 [info] 
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps

2025-09-22 11:57:16.584 [info] tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster

2025-09-22 11:57:16.584 [info] tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins

2025-09-22 11:57:16.584 [info] tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error

2025-09-22 11:57:16.584 [info] tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-22 11:57:17.087 [info] 
=============================== tests coverage ================================

2025-09-22 11:57:17.094 [info] _______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    228      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 701-718, 727-759, 764-817, 822-827, 831
--------------------------------------------------------------------------------
TOTAL                                  919    722    334      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.88%
195 tests collected in 54.15s

2025-09-22 11:59:52.628 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pandas\pyproject.toml
2025-09-22 11:59:52.737 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-22 11:59:52.737 [info] arg: --rootdir already exists in args, not adding.
2025-09-22 11:59:52.737 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-e1207e75b21e472c855d
2025-09-22 11:59:52.743 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-22 11:59:52.743 [info] cwd: .
2025-09-22 12:00:19.541 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\~andas\pyproject.toml
2025-09-22 12:00:19.541 [error] Test discovery already in progress, not starting a new one.
2025-09-22 12:00:26.860 [info] tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
2025-09-22 12:00:26.860 [info] 
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic

2025-09-22 12:00:26.860 [info] tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure

2025-09-22 12:00:26.860 [info] tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close

2025-09-22 12:00:26.861 [info] tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death

2025-09-22 12:00:26.861 [info] tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
2025-09-22 12:00:26.861 [info] 
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden

2025-09-22 12:00:26.861 [info] tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
2025-09-22 12:00:26.861 [info] 
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft

2025-09-22 12:00:26.861 [info] tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
2025-09-22 12:00:26.861 [info] 
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp

2025-09-22 12:00:26.861 [info] tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
2025-09-22 12:00:26.861 [info] 
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster

2025-09-22 12:00:26.862 [info] tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod

2025-09-22 12:00:26.862 [info] tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
2025-09-22 12:00:26.862 [info] 
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
2025-09-22 12:00:26.862 [info] 
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
2025-09-22 12:00:26.862 [info] 
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-22 12:00:27.085 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    228      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 701-718, 727-759, 764-817, 822-827, 831
--------------------------------------------------------------------------------
TOTAL                                  919    722    334      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.88%
195 tests collected in 32.42s

2025-09-22 12:06:33.116 [info] Experiment 'pythonSurveyNotification' is active
2025-09-22 12:06:33.117 [info] Native locator: Refresh started
2025-09-22 12:06:33.336 [info] Native locator: Refresh started
2025-09-22 12:06:33.355 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-22 12:06:36.180 [info] > pyenv which python
2025-09-22 12:06:36.180 [info] cwd: .
2025-09-22 12:06:37.098 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-22 12:06:37.099 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-22 12:06:37.107 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-22 12:06:37.271 [info] Native locator: Refresh finished in 4407 ms
2025-09-22 12:06:37.378 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-1106c7817de21f755ff9
2025-09-22 12:06:37.496 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-22 12:06:37.496 [info] shell: commandPrompt
2025-09-22 12:06:37.850 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-22 12:06:37.850 [info] cwd: .
2025-09-22 12:06:54.949 [info] Starting Pylance language server.
2025-09-22 12:06:57.262 [info] tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs

2025-09-22 12:06:57.262 [info] tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
2025-09-22 12:06:57.262 [info] 
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
2025-09-22 12:06:57.263 [info] 
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note

2025-09-22 12:06:57.263 [info] tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
2025-09-22 12:06:57.263 [info] 
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success

2025-09-22 12:06:57.263 [info] tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable

2025-09-22 12:06:57.263 [info] tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
2025-09-22 12:06:57.263 [info] 
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds

2025-09-22 12:06:57.263 [info] tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math

2025-09-22 12:06:57.264 [info] tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
2025-09-22 12:06:57.264 [info] 
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits

2025-09-22 12:06:57.264 [info] tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender

2025-09-22 12:06:57.264 [info] tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
2025-09-22 12:06:57.264 [info] 
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]

2025-09-22 12:06:57.264 [info] tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow

2025-09-22 12:06:57.264 [info] tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-22 12:06:57.612 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    228      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 701-718, 727-759, 764-817, 822-827, 831
--------------------------------------------------------------------------------
TOTAL                                  919    722    334      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.88%
195 tests collected in 18.01s

2025-09-22 13:12:59.461 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-22 13:12:59.462 [info] shell: commandPrompt
2025-09-22 13:12:59.750 [info] arg: --rootdir already exists in args, not adding.
2025-09-22 13:12:59.750 [info] Attempting to use temp directory for test ids file, file name: test-ids-abd16f9e0016e9d4d87e.txt
2025-09-22 13:12:59.761 [info] Environment variables set for pytest execution: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-results-73589716886a5abbc634, RUN_TEST_IDS_PIPE=C:\Users\gherr\AppData\Local\Temp\test-ids-abd16f9e0016e9d4d87e.txt
2025-09-22 13:12:59.762 [info] Running pytest with arguments: c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=c:\dev\grimbrain for workspace c:\dev\grimbrain 

2025-09-22 13:12:59.762 [info] > .\venv311\Scripts\python.exe ~\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=.
2025-09-22 13:12:59.762 [info] cwd: .
2025-09-22 14:47:55.379 [info] Experiment 'pythonSurveyNotification' is active
2025-09-22 14:47:55.379 [info] Native locator: Refresh started
2025-09-22 14:47:55.515 [info] Native locator: Refresh started
2025-09-22 14:47:55.558 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-22 14:47:58.512 [info] > pyenv which python
2025-09-22 14:47:58.512 [info] cwd: .
2025-09-22 14:47:58.916 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-22 14:47:59.120 [info] Native locator: Refresh finished in 3988 ms
2025-09-22 14:48:17.558 [info] Starting Pylance language server.
2025-09-22 14:49:29.284 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pkg_resources\tests\data\my-test-package-source\setup.cfg
2025-09-22 14:49:29.292 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-22 14:49:29.293 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-920f1f4c3a77da24be2b
2025-09-22 14:49:29.333 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-22 14:49:29.333 [info] shell: commandPrompt
2025-09-22 14:49:29.526 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-22 14:49:29.526 [info] cwd: .
2025-09-22 14:50:11.583 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\numpy\f2py\setup.cfg
2025-09-22 14:50:11.606 [error] Test discovery already in progress, not starting a new one.
2025-09-22 14:50:25.165 [info] tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
2025-09-22 14:50:25.165 [info] 
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields

2025-09-22 14:50:25.166 [info] tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic

2025-09-22 14:50:25.166 [info] tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor

2025-09-22 14:50:25.166 [info] tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
2025-09-22 14:50:25.166 [info] 
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store

2025-09-22 14:50:25.166 [info] tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
2025-09-22 14:50:25.166 [info] 
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero

2025-09-22 14:50:25.166 [info] tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json

2025-09-22 14:50:25.167 [info] tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster

2025-09-22 14:50:25.167 [info] tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
2025-09-22 14:50:25.167 [info] 
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok

2025-09-22 14:50:25.167 [info] tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
2025-09-22 14:50:25.167 [info] 
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-22 14:50:25.595 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    228      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 701-718, 727-759, 764-817, 822-827, 831
--------------------------------------------------------------------------------
TOTAL                                  919    722    334      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.88%
195 tests collected in 54.29s

2025-09-22 14:52:59.894 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pandas\pyproject.toml
2025-09-22 14:52:59.968 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-22 14:52:59.969 [info] arg: --rootdir already exists in args, not adding.
2025-09-22 14:52:59.969 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-a16365f77339809cf34f
2025-09-22 14:52:59.974 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-22 14:52:59.974 [info] cwd: .
2025-09-22 14:53:25.731 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\~andas\pyproject.toml
2025-09-22 14:53:25.731 [error] Test discovery already in progress, not starting a new one.
2025-09-22 14:53:32.873 [info] tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
2025-09-22 14:53:32.873 [info] 
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip

2025-09-22 14:53:32.873 [info] tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
2025-09-22 14:53:32.874 [info] 
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage

2025-09-22 14:53:32.874 [info] tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects

2025-09-22 14:53:32.874 [info] tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
2025-09-22 14:53:32.874 [info] 
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden

2025-09-22 14:53:32.874 [info] tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
2025-09-22 14:53:32.874 [info] 
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft

2025-09-22 14:53:32.874 [info] tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
2025-09-22 14:53:32.874 [info] 
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
2025-09-22 14:53:32.874 [info] 
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero

2025-09-22 14:53:32.874 [info] tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data

2025-09-22 14:53:32.874 [info] tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written

2025-09-22 14:53:32.875 [info] tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster

2025-09-22 14:53:32.875 [info] tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
2025-09-22 14:53:32.875 [info] 
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
2025-09-22 14:53:32.875 [info] 
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
2025-09-22 14:53:32.875 [info] 
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
2025-09-22 14:53:32.875 [info] 
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
2025-09-22 14:53:32.875 [info] 
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex

2025-09-22 14:53:32.875 [info] tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-22 14:53:33.054 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    228      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 701-718, 727-759, 764-817, 822-827, 831
--------------------------------------------------------------------------------
TOTAL                                  919    722    334      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.88%
195 tests collected in 31.52s

2025-09-22 14:59:06.446 [info] Experiment 'pythonSurveyNotification' is active
2025-09-22 14:59:06.446 [info] Native locator: Refresh started
2025-09-22 14:59:06.583 [info] Native locator: Refresh started
2025-09-22 14:59:06.599 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-22 14:59:09.113 [info] > pyenv which python
2025-09-22 14:59:09.113 [info] cwd: .
2025-09-22 14:59:10.140 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-22 14:59:10.140 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-22 14:59:10.250 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-22 14:59:10.433 [info] Native locator: Refresh finished in 4234 ms
2025-09-22 14:59:10.448 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-5381268152ae028d4c75
2025-09-22 14:59:10.531 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-22 14:59:10.531 [info] shell: commandPrompt
2025-09-22 14:59:10.846 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-22 14:59:10.846 [info] cwd: .
2025-09-22 14:59:23.593 [info] Starting Pylance language server.
2025-09-22 14:59:30.368 [info] tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one

2025-09-22 14:59:30.369 [info] tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach

2025-09-22 14:59:30.369 [info] tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv

2025-09-22 14:59:30.369 [info] tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
2025-09-22 14:59:30.369 [info] 
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data

2025-09-22 14:59:30.369 [info] tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
2025-09-22 14:59:30.369 [info] 
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample

2025-09-22 14:59:30.370 [info] tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]

2025-09-22 14:59:30.370 [info] tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer

2025-09-22 14:59:30.370 [info] tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-22 14:59:30.707 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    228      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 701-718, 727-759, 764-817, 822-827, 831
--------------------------------------------------------------------------------
TOTAL                                  919    722    334      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.88%
195 tests collected in 18.32s

2025-09-22 15:00:38.694 [info] arg: --rootdir already exists in args, not adding.
2025-09-22 15:00:38.694 [info] Attempting to use temp directory for test ids file, file name: test-ids-f549c6dca99447827dd6.txt
2025-09-22 15:00:38.703 [info] Environment variables set for pytest execution: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-results-8d90e70d2c6629b8e0c2, RUN_TEST_IDS_PIPE=C:\Users\gherr\AppData\Local\Temp\test-ids-f549c6dca99447827dd6.txt
2025-09-22 15:00:38.703 [info] Running pytest with arguments: c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=c:\dev\grimbrain for workspace c:\dev\grimbrain 

2025-09-22 15:00:38.703 [info] > .\venv311\Scripts\python.exe ~\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=.
2025-09-22 15:00:38.703 [info] cwd: .
2025-09-23 08:35:29.359 [info] Experiment 'pythonSurveyNotification' is active
2025-09-23 08:35:29.360 [info] Native locator: Refresh started
2025-09-23 08:35:29.435 [info] Native locator: Refresh started
2025-09-23 08:35:29.520 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-23 08:35:32.207 [info] > pyenv which python
2025-09-23 08:35:32.207 [info] cwd: .
2025-09-23 08:35:32.404 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-23 08:35:32.773 [info] Native locator: Refresh finished in 3808 ms
2025-09-23 08:35:51.887 [info] Starting Pylance language server.
2025-09-23 08:37:40.506 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pkg_resources\tests\data\my-test-package-source\setup.cfg
2025-09-23 08:37:40.559 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 08:37:40.560 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-b03c1d138cd1dba8e5fc
2025-09-23 08:37:40.619 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-23 08:37:40.619 [info] shell: commandPrompt
2025-09-23 08:37:40.891 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 08:37:40.891 [info] cwd: .
2025-09-23 08:38:24.852 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\numpy\f2py\setup.cfg
2025-09-23 08:38:24.861 [error] Test discovery already in progress, not starting a new one.
2025-09-23 08:38:37.566 [info] tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules

2025-09-23 08:38:37.566 [info] tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two

2025-09-23 08:38:37.566 [info] tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage

2025-09-23 08:38:37.567 [info] tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
2025-09-23 08:38:37.567 [info] 
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv

2025-09-23 08:38:37.567 [info] tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
2025-09-23 08:38:37.567 [info] 
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs

2025-09-23 08:38:37.567 [info] tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
2025-09-23 08:38:37.567 [info] 
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
2025-09-23 08:38:37.805 [info] 
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 08:38:38.083 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    230      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 703-723, 732-764, 769-822, 827-832, 836
--------------------------------------------------------------------------------
TOTAL                                  919    722    336      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.86%
196 tests collected in 55.26s

2025-09-23 08:41:15.354 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pandas\pyproject.toml
2025-09-23 08:41:15.434 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 08:41:15.434 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 08:41:15.434 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-fd9e6d9216e90f47c2d3
2025-09-23 08:41:15.439 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 08:41:15.439 [info] cwd: .
2025-09-23 08:41:41.993 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\~andas\pyproject.toml
2025-09-23 08:41:41.993 [error] Test discovery already in progress, not starting a new one.
2025-09-23 08:41:48.510 [info] tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
2025-09-23 08:41:48.510 [info] 
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
2025-09-23 08:41:48.510 [info] 
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice

2025-09-23 08:41:48.511 [info] tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables

2025-09-23 08:41:48.511 [info] tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
2025-09-23 08:41:48.511 [info] 
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death

2025-09-23 08:41:48.511 [info] tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
2025-09-23 08:41:48.511 [info] 
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv

2025-09-23 08:41:48.511 [info] tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
2025-09-23 08:41:48.511 [info] 
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat

2025-09-23 08:41:48.511 [info] tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero

2025-09-23 08:41:48.511 [info] tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
2025-09-23 08:41:48.512 [info] 
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane

2025-09-23 08:41:48.512 [info] tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster

2025-09-23 08:41:48.512 [info] tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting

2025-09-23 08:41:48.512 [info] tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]

2025-09-23 08:41:48.512 [info] tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged

2025-09-23 08:41:48.512 [info] tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
2025-09-23 08:41:48.512 [info] 
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 08:41:48.708 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    230      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 703-723, 732-764, 769-822, 827-832, 836
--------------------------------------------------------------------------------
TOTAL                                  919    722    336      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.86%
196 tests collected in 31.55s

2025-09-23 09:30:01.462 [info] Experiment 'pythonSurveyNotification' is active
2025-09-23 09:30:01.462 [info] Native locator: Refresh started
2025-09-23 09:30:01.550 [info] Native locator: Refresh started
2025-09-23 09:30:01.566 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-23 09:30:04.017 [info] > pyenv which python
2025-09-23 09:30:04.017 [info] cwd: .
2025-09-23 09:30:04.347 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-23 09:30:04.616 [info] Native locator: Refresh finished in 3330 ms
2025-09-23 09:30:26.147 [info] Starting Pylance language server.
2025-09-23 09:31:49.758 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-23 09:31:49.761 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 09:31:49.762 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-4e864539e503541b601f
2025-09-23 09:31:49.928 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-23 09:31:49.928 [info] shell: commandPrompt
2025-09-23 09:31:50.120 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 09:31:50.120 [info] cwd: .
2025-09-23 09:32:07.145 [info] tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show

2025-09-23 09:32:07.146 [info] tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
2025-09-23 09:32:07.146 [info] 
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects

2025-09-23 09:32:07.146 [info] tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
2025-09-23 09:32:07.146 [info] 
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
2025-09-23 09:32:07.146 [info] 
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner

2025-09-23 09:32:07.146 [info] tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast

2025-09-23 09:32:07.147 [info] tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation

2025-09-23 09:32:07.147 [info] tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok

2025-09-23 09:32:07.147 [info] tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex

2025-09-23 09:32:07.147 [info] tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 09:32:07.503 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     522    475    230      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 703-723, 732-764, 769-822, 827-832, 836
--------------------------------------------------------------------------------
TOTAL                                  919    722    336      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.86%
196 tests collected in 16.46s

2025-09-23 09:32:21.684 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 09:32:21.684 [info] Attempting to use temp directory for test ids file, file name: test-ids-6c2b025aef6b84c2cf66.txt
2025-09-23 09:32:21.691 [info] Environment variables set for pytest execution: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-results-145a7f86f6025b2387a6, RUN_TEST_IDS_PIPE=C:\Users\gherr\AppData\Local\Temp\test-ids-6c2b025aef6b84c2cf66.txt
2025-09-23 09:32:21.691 [info] Running pytest with arguments: c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=c:\dev\grimbrain for workspace c:\dev\grimbrain 

2025-09-23 09:32:21.691 [info] > .\venv311\Scripts\python.exe ~\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=.
2025-09-23 09:32:21.691 [info] cwd: .
2025-09-23 10:50:28.574 [info] Experiment 'pythonSurveyNotification' is active
2025-09-23 10:50:28.574 [info] Native locator: Refresh started
2025-09-23 10:50:28.777 [info] Native locator: Refresh started
2025-09-23 10:50:30.632 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-23 10:50:31.346 [info] > pyenv which python
2025-09-23 10:50:31.346 [info] cwd: .
2025-09-23 10:50:31.951 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-23 10:50:32.244 [info] Native locator: Refresh finished in 3931 ms
2025-09-23 10:50:52.440 [info] Starting Pylance language server.
2025-09-23 10:52:11.498 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pkg_resources\tests\data\my-test-package-source\setup.cfg
2025-09-23 10:52:11.512 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 10:52:11.512 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-6f21c6c52f7e9635c185
2025-09-23 10:52:11.549 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-23 10:52:11.549 [info] shell: commandPrompt
2025-09-23 10:52:11.736 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 10:52:11.736 [info] cwd: .
2025-09-23 10:52:53.506 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\numpy\f2py\setup.cfg
2025-09-23 10:52:53.539 [error] Test discovery already in progress, not starting a new one.
2025-09-23 10:53:06.584 [info] tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
2025-09-23 10:53:06.585 [info] 
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
2025-09-23 10:53:06.585 [info] 
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields

2025-09-23 10:53:06.585 [info] tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample

2025-09-23 10:53:06.585 [info] tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
2025-09-23 10:53:06.585 [info] 
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency

2025-09-23 10:53:06.585 [info] tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 10:53:07.047 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     523    476    230      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 703-724, 733-765, 770-823, 828-833, 837
--------------------------------------------------------------------------------
TOTAL                                  920    723    336      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
196 tests collected in 53.58s

2025-09-23 10:55:39.900 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pandas\pyproject.toml
2025-09-23 10:55:40.156 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 10:55:40.157 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 10:55:40.157 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-ef1f2bebc6acf2174a0b
2025-09-23 10:55:40.161 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 10:55:40.161 [info] cwd: .
2025-09-23 10:56:04.516 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\~andas\pyproject.toml
2025-09-23 10:56:04.517 [error] Test discovery already in progress, not starting a new one.
2025-09-23 10:56:11.290 [info] tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
2025-09-23 10:56:11.291 [info] 
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
2025-09-23 10:56:11.291 [info] 
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden

2025-09-23 10:56:11.291 [info] tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math

2025-09-23 10:56:11.291 [info] tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data

2025-09-23 10:56:11.292 [info] tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
2025-09-23 10:56:11.292 [info] 
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok

2025-09-23 10:56:11.292 [info] tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag

2025-09-23 10:56:11.292 [info] tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 10:56:11.522 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     523    476    230      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 703-724, 733-765, 770-823, 828-833, 837
--------------------------------------------------------------------------------
TOTAL                                  920    723    336      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
196 tests collected in 29.82s

2025-09-23 10:59:54.992 [info] Experiment 'pythonSurveyNotification' is active
2025-09-23 10:59:54.992 [info] Native locator: Refresh started
2025-09-23 10:59:55.049 [info] Native locator: Refresh started
2025-09-23 10:59:55.095 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-23 10:59:57.613 [info] > pyenv which python
2025-09-23 10:59:57.613 [info] cwd: .
2025-09-23 10:59:57.968 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-23 10:59:58.250 [info] Native locator: Refresh finished in 3491 ms
2025-09-23 11:00:07.551 [info] Starting Pylance language server.
2025-09-23 11:01:29.272 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-23 11:01:29.274 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 11:01:29.274 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-c662d819f2cd44e89ab8
2025-09-23 11:01:29.338 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-23 11:01:29.338 [info] shell: commandPrompt
2025-09-23 11:01:29.530 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 11:01:29.530 [info] cwd: .
2025-09-23 11:01:46.416 [info] tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves

2025-09-23 11:01:46.417 [info] tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex

2025-09-23 11:01:46.417 [info] tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod

2025-09-23 11:01:46.417 [info] tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
2025-09-23 11:01:46.417 [info] 
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv

2025-09-23 11:01:46.417 [info] tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
2025-09-23 11:01:46.417 [info] 
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp

2025-09-23 11:01:46.418 [info] tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
2025-09-23 11:01:46.418 [info] 
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
2025-09-23 11:01:46.418 [info] 
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation

2025-09-23 11:01:46.418 [info] tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs

2025-09-23 11:01:46.418 [info] tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
2025-09-23 11:01:46.418 [info] 
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
2025-09-23 11:01:46.418 [info] 
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 11:01:46.794 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           172     71     28      0    50%   63-112, 116-119, 130-139, 201-226, 230-232, 236-242, 246-254, 258-259
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     523    476    230      2     7%   7, 36, 72-75, 94-109, 113-119, 134-154, 160-162, 175-236, 245-257, 262, 267-280, 285-297, 323-613, 623-689, 703-724, 733-765, 770-823, 828-833, 837
--------------------------------------------------------------------------------
TOTAL                                  920    723    336      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
196 tests collected in 16.23s

2025-09-23 11:05:05.193 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 11:05:05.193 [info] Attempting to use temp directory for test ids file, file name: test-ids-cebb6cd20f69854d2f92.txt
2025-09-23 11:05:05.200 [info] Environment variables set for pytest execution: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-results-6aeefd1c77c21cc2b4ec, RUN_TEST_IDS_PIPE=C:\Users\gherr\AppData\Local\Temp\test-ids-cebb6cd20f69854d2f92.txt
2025-09-23 11:05:05.200 [info] Running pytest with arguments: c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=c:\dev\grimbrain for workspace c:\dev\grimbrain 

2025-09-23 11:05:05.200 [info] > .\venv311\Scripts\python.exe ~\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=.
2025-09-23 11:05:05.200 [info] cwd: .
2025-09-23 11:31:19.889 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-23 11:31:19.889 [info] shell: commandPrompt
2025-09-23 11:31:20.136 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 11:31:20.136 [info] Attempting to use temp directory for test ids file, file name: test-ids-c05ff0c0a5fabb306fa7.txt
2025-09-23 11:31:20.142 [info] Environment variables set for pytest execution: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-results-a523b9bfc96e81b54612, RUN_TEST_IDS_PIPE=C:\Users\gherr\AppData\Local\Temp\test-ids-c05ff0c0a5fabb306fa7.txt
2025-09-23 11:31:20.142 [info] Running pytest with arguments: c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=c:\dev\grimbrain for workspace c:\dev\grimbrain 

2025-09-23 11:31:20.142 [info] > .\venv311\Scripts\python.exe ~\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=.
2025-09-23 11:31:20.142 [info] cwd: .
2025-09-23 14:25:21.720 [info] Experiment 'pythonSurveyNotification' is active
2025-09-23 14:25:21.720 [info] Native locator: Refresh started
2025-09-23 14:25:21.951 [info] Native locator: Refresh started
2025-09-23 14:25:21.972 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-23 14:25:25.038 [info] > pyenv which python
2025-09-23 14:25:25.038 [info] cwd: .
2025-09-23 14:25:25.364 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-23 14:25:25.677 [info] Native locator: Refresh finished in 4254 ms
2025-09-23 14:25:42.814 [info] Starting Pylance language server.
2025-09-23 14:31:02.006 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pkg_resources\tests\data\my-test-package-source\setup.cfg
2025-09-23 14:31:02.028 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 14:31:02.029 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-30b6f969ccfcaa8e50fb
2025-09-23 14:31:02.105 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-23 14:31:02.105 [info] shell: commandPrompt
2025-09-23 14:31:02.322 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 14:31:02.322 [info] cwd: .
2025-09-23 14:31:45.362 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\numpy\f2py\setup.cfg
2025-09-23 14:31:45.369 [error] Test discovery already in progress, not starting a new one.
2025-09-23 14:31:58.417 [info] tests/phase10/test_inventory.py::test_add_remove_and_format
tests/phase10/test_inventory.py::test_run_shop_handles_stack_and_legacy_list
tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
2025-09-23 14:31:58.417 [info] 
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
2025-09-23 14:31:58.418 [info] 
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
2025-09-23 14:31:58.418 [info] 
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings

2025-09-23 14:31:58.418 [info] tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
2025-09-23 14:31:58.418 [info] 
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible

2025-09-23 14:31:58.418 [info] tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage

2025-09-23 14:31:58.418 [info] tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots

2025-09-23 14:31:58.418 [info] tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
2025-09-23 14:31:58.418 [info] 
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand

2025-09-23 14:31:58.418 [info] tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
2025-09-23 14:31:58.418 [info] 
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
2025-09-23 14:31:58.418 [info] 
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
2025-09-23 14:31:58.419 [info] 
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 14:31:58.816 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           184     81     36      0    47%   63-112, 116-119, 130-139, 202-208, 211-213, 217-242, 246-248, 252-258, 262-270, 274-275
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     524    476    228      2     7%   7, 37, 73-76, 95-110, 114-120, 135-155, 161-163, 176-237, 246-256, 261, 266-279, 284-296, 322-612, 622-690, 704-725, 734-766, 771-824, 829-834, 838
--------------------------------------------------------------------------------
TOTAL                                  933    733    342      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
198 tests collected in 54.63s

2025-09-23 14:34:39.154 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pandas\pyproject.toml
2025-09-23 14:34:39.370 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 14:34:39.370 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 14:34:39.370 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-5400913254480c7cdd99
2025-09-23 14:34:39.374 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 14:34:39.374 [info] cwd: .
2025-09-23 14:35:04.916 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\~andas\pyproject.toml
2025-09-23 14:35:04.916 [error] Test discovery already in progress, not starting a new one.
2025-09-23 14:35:12.169 [info] tests/phase10/test_inventory.py::test_add_remove_and_format
tests/phase10/test_inventory.py::test_run_shop_handles_stack_and_legacy_list
tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
2025-09-23 14:35:12.169 [info] 
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
2025-09-23 14:35:12.169 [info] 
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex

2025-09-23 14:35:12.169 [info] tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp

2025-09-23 14:35:12.169 [info] tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
2025-09-23 14:35:12.170 [info] 
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death

2025-09-23 14:35:12.170 [info] tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden

2025-09-23 14:35:12.170 [info] tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
2025-09-23 14:35:12.170 [info] 
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math

2025-09-23 14:35:12.170 [info] tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage

2025-09-23 14:35:12.170 [info] tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
2025-09-23 14:35:12.170 [info] 
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
2025-09-23 14:35:12.170 [info] 
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand

2025-09-23 14:35:12.170 [info] tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]

2025-09-23 14:35:12.171 [info] tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged

2025-09-23 14:35:12.171 [info] tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex

2025-09-23 14:35:12.171 [info] tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 14:35:12.346 [info] 
=============================== tests coverage ================================

2025-09-23 14:35:12.357 [info] _______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           184     81     36      0    47%   63-112, 116-119, 130-139, 202-208, 211-213, 217-242, 246-248, 252-258, 262-270, 274-275
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     524    476    228      2     7%   7, 37, 73-76, 95-110, 114-120, 135-155, 161-163, 176-237, 246-256, 261, 266-279, 284-296, 322-612, 622-690, 704-725, 734-766, 771-824, 829-834, 838
--------------------------------------------------------------------------------
TOTAL                                  933    733    342      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
198 tests collected in 31.42s

2025-09-23 14:43:08.744 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-23 14:43:08.745 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-23 14:43:08.745 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 14:43:08.745 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-33c56b136e24fa6cd19f
2025-09-23 14:43:08.778 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-23 14:43:08.778 [info] shell: commandPrompt
2025-09-23 14:43:08.964 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-23 14:43:08.964 [info] cwd: .
2025-09-23 14:43:26.477 [info] tests/phase10/test_inventory.py::test_add_remove_and_format
tests/phase10/test_inventory.py::test_run_shop_handles_stack_and_legacy_list
tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs

2025-09-23 14:43:26.477 [info] tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display

2025-09-23 14:43:26.477 [info] tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
2025-09-23 14:43:26.477 [info] 
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
2025-09-23 14:43:26.478 [info] 
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only

2025-09-23 14:43:26.478 [info] tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256

2025-09-23 14:43:26.478 [info] tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
2025-09-23 14:43:26.478 [info] 
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json

2025-09-23 14:43:26.478 [info] tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster

2025-09-23 14:43:26.478 [info] tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod

2025-09-23 14:43:26.479 [info] tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
2025-09-23 14:43:26.479 [info] 
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
2025-09-23 14:43:26.479 [info] 
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency

2025-09-23 14:43:26.479 [info] tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-23 14:43:26.843 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           184     81     36      0    47%   63-112, 116-119, 130-139, 202-208, 211-213, 217-242, 246-248, 252-258, 262-270, 274-275
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     524    476    228      2     7%   7, 37, 73-76, 95-110, 114-120, 135-155, 161-163, 176-237, 246-256, 261, 266-279, 284-296, 322-612, 622-690, 704-725, 734-766, 771-824, 829-834, 838
--------------------------------------------------------------------------------
TOTAL                                  933    733    342      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%

2025-09-23 14:43:26.853 [info] 198 tests collected in 16.90s

2025-09-23 14:43:43.815 [info] arg: --rootdir already exists in args, not adding.
2025-09-23 14:43:43.815 [info] Attempting to use temp directory for test ids file, file name: test-ids-e810b74f6c692ee4cd3f.txt
2025-09-23 14:43:43.823 [info] Environment variables set for pytest execution: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-results-02fb540a25161d110747, RUN_TEST_IDS_PIPE=C:\Users\gherr\AppData\Local\Temp\test-ids-e810b74f6c692ee4cd3f.txt
2025-09-23 14:43:43.823 [info] Running pytest with arguments: c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=c:\dev\grimbrain for workspace c:\dev\grimbrain 

2025-09-23 14:43:43.823 [info] > .\venv311\Scripts\python.exe ~\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=.
2025-09-23 14:43:43.823 [info] cwd: .
2025-09-24 10:09:03.263 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pkg_resources\tests\data\my-test-package-source\setup.cfg
2025-09-24 10:09:03.299 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 10:09:03.303 [info] arg: --rootdir already exists in args, not adding.
2025-09-24 10:09:03.308 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-ca6c0721e0adb72430cb
2025-09-24 10:09:03.319 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-24 10:09:03.319 [info] shell: commandPrompt
2025-09-24 10:09:03.553 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 10:09:03.553 [info] cwd: .
2025-09-24 10:09:47.662 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\numpy\f2py\setup.cfg
2025-09-24 10:09:47.847 [error] Test discovery already in progress, not starting a new one.
2025-09-24 10:10:01.438 [info] tests/phase10/test_inventory.py::test_add_remove_and_format
tests/phase10/test_inventory.py::test_run_shop_handles_stack_and_legacy_list
tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase11/test_character_creator_wizard.py::test_roll_abilities_deterministic
tests/phase11/test_character_creator_wizard.py::test_build_from_rolled_scores
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules

2025-09-24 10:10:01.438 [info] tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
2025-09-24 10:10:01.439 [info] 
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
2025-09-24 10:10:01.439 [info] 
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
2025-09-24 10:10:01.439 [info] 
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats

2025-09-24 10:10:01.439 [info] tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
2025-09-24 10:10:01.439 [info] 
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp

2025-09-24 10:10:01.439 [info] tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]

2025-09-24 10:10:01.439 [info] tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error

2025-09-24 10:10:01.439 [info] tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
2025-09-24 10:10:01.439 [info] 
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-24 10:10:01.847 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           184     81     36      0    47%   63-112, 116-119, 130-139, 202-208, 211-213, 217-242, 246-248, 252-258, 262-270, 274-275
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     524    476    228      2     7%   7, 37, 73-76, 95-110, 114-120, 135-155, 161-163, 176-237, 246-256, 261, 266-279, 284-296, 322-612, 622-690, 704-725, 734-766, 771-824, 829-834, 838
--------------------------------------------------------------------------------
TOTAL                                  933    733    342      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
200 tests collected in 56.41s

2025-09-24 10:12:37.879 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pandas\pyproject.toml
2025-09-24 10:12:38.167 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 10:12:38.167 [info] arg: --rootdir already exists in args, not adding.
2025-09-24 10:12:38.167 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-778c7654282110e6d6dc
2025-09-24 10:12:38.171 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 10:12:38.171 [info] cwd: .
2025-09-24 10:13:03.206 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\~andas\pyproject.toml
2025-09-24 10:13:03.207 [error] Test discovery already in progress, not starting a new one.
2025-09-24 10:13:10.582 [info] tests/phase10/test_inventory.py::test_add_remove_and_format
tests/phase10/test_inventory.py::test_run_shop_handles_stack_and_legacy_list
tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase11/test_character_creator_wizard.py::test_roll_abilities_deterministic
tests/phase11/test_character_creator_wizard.py::test_build_from_rolled_scores
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying
tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
2025-09-24 10:13:10.582 [info] 
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
2025-09-24 10:13:10.582 [info] 
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp
tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables

2025-09-24 10:13:10.582 [info] tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
2025-09-24 10:13:10.582 [info] 
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
2025-09-24 10:13:10.583 [info] 
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa

2025-09-24 10:13:10.583 [info] tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
2025-09-24 10:13:10.583 [info] 
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible
tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable

2025-09-24 10:13:10.583 [info] tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner

2025-09-24 10:13:10.583 [info] tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
2025-09-24 10:13:10.583 [info] 
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster

2025-09-24 10:13:10.583 [info] tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
2025-09-24 10:13:10.583 [info] 
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
tests/test_utils.py::test_coerce_obj[None-expected3]
2025-09-24 10:13:10.583 [info] 
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok

2025-09-24 10:13:10.583 [info] tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
2025-09-24 10:13:10.583 [info] 
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod
tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-24 10:13:10.769 [info] 
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           184     81     36      0    47%   63-112, 116-119, 130-139, 202-208, 211-213, 217-242, 246-248, 252-258, 262-270, 274-275
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     524    476    228      2     7%   7, 37, 73-76, 95-110, 114-120, 135-155, 161-163, 176-237, 246-256, 261, 266-279, 284-296, 322-612, 622-690, 704-725, 734-766, 771-824, 829-834, 838
--------------------------------------------------------------------------------
TOTAL                                  933    733    342      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
200 tests collected in 31.07s

2025-09-24 10:21:05.356 [info] Experiment 'pythonSurveyNotification' is active
2025-09-24 10:21:05.356 [info] Native locator: Refresh started
2025-09-24 10:21:05.439 [info] Native locator: Refresh started
2025-09-24 10:21:05.552 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-24 10:21:08.754 [info] > pyenv which python
2025-09-24 10:21:08.754 [info] cwd: .
2025-09-24 10:21:09.670 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-24 10:21:10.263 [info] Native locator: Refresh finished in 5368 ms
2025-09-24 10:21:39.635 [info] Starting Pylance language server.
2025-09-24 10:25:30.608 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-24 10:25:30.610 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 10:25:30.611 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-1879d0c5c3a3b75273e9
2025-09-24 10:25:30.729 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-24 10:25:30.729 [info] shell: commandPrompt
2025-09-24 10:25:30.985 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 10:25:30.985 [info] cwd: .
2025-09-24 10:25:51.055 [info] tests/phase10/test_inventory.py::test_add_remove_and_format
tests/phase10/test_inventory.py::test_run_shop_handles_stack_and_legacy_list
tests/phase10/test_journal_export.py::test_formatters_and_export
tests/phase11/test_character_creator_wizard.py::test_roll_abilities_deterministic
tests/phase11/test_character_creator_wizard.py::test_build_from_rolled_scores
tests/phase7/test_conflict_precedence.py::test_conflict_precedence
tests/phase7/test_content_cli.py::test_content_and_rules_shims
tests/phase7/test_content_filters_and_packs.py::test_content_filters_and_packs
tests/phase7/test_content_show.py::test_content_show
tests/phase7/test_death_flow.py::test_drop_to_zero_enters_dying

2025-09-24 10:25:51.055 [info] tests/phase7/test_death_flow.py::test_stable_then_damage_fails_one
tests/phase7/test_death_flow.py::test_critical_at_zero_fails_two
tests/phase7/test_death_flow.py::test_heal_clears_death_saves
tests/phase7/test_death_flow.py::test_three_failures_die
tests/phase7/test_id_normalization.py::test_id_normalization
tests/phase7/test_instant_death.py::test_instant_death_off
tests/phase7/test_instant_death.py::test_instant_death_on
tests/phase7/test_manifest_incremental_all_types.py::test_manifest_incremental_all_types
tests/phase7/test_mutation_rules.py::test_mutation_rules
tests/phase7/test_nearest_suggestions.py::test_nearest_suggestions
tests/phase7/test_play_cli.py::test_scripted_fight
tests/phase7/test_play_cli.py::test_unknown_verb_shows_suggestion
tests/phase7/test_play_cli.py::test_json_output
tests/phase7/test_play_json_only.py::test_json_only_stdout
tests/phase7/test_precedence_crosspacks.py::test_precedence_crosspacks
tests/phase7/test_resolver_tuning.py::test_suggestions_include_scores
tests/phase7/test_resolver_tuning.py::test_threshold_blocks_weak_hits
tests/phase7/test_resolver_tuning.py::test_warm_start_prints
tests/phase7/test_stabilize_routes.py::test_medicine_success_stabilizes
tests/phase7/test_stabilize_routes.py::test_medicine_fail_keeps_dying
tests/phase7/test_stabilize_routes.py::test_spare_dying_stabilizes_without_heal
tests/phase7/test_verb_suggestions.py::test_unknown_verb_shows_suggestions
tests/phase7/test_verb_suggestions.py::test_alias_resolves
tests/phase8/test_encounter_clock.py::test_clock_increments_on_no_encounter_and_resets_on_encounter
tests/phase8/test_encounter_rng_force.py::test_force_encounter_always_creates_one
tests/phase8/test_encounter_rng_force.py::test_travel_seed_advances_producing_variety
tests/phase8/test_progression_loot_shop.py::test_pb_table
tests/phase8/test_progression_loot_shop.py::test_xp_award_and_levelup_deterministic
tests/phase8/test_progression_loot_shop.py::test_loot_gold_and_items
tests/phase8/test_progression_loot_shop.py::test_shop_buy_sell_scripted
tests/phase9/test_character_creation.py::test_ability_mod
tests/phase9/test_character_creation.py::test_point_buy_cost_ok
tests/phase9/test_character_creation.py::test_build_and_roundtrip
tests/phase9/test_journal.py::test_log_event_persists_and_formats
tests/phase9/test_journal.py::test_cli_logging_and_journal_command
tests/test_ammo.py::test_ammo_inference_and_display
tests/test_ammo.py::test_spend_ammo_success_and_failure
tests/test_ammo.py::test_explicit_ammo_override
tests/test_armor_ac.py::test_light_armor_full_dex
tests/test_armor_ac.py::test_medium_armor_caps_positive_dex_but_allows_negative
tests/test_armor_ac.py::test_heavy_ignores_dex
tests/test_armor_ac.py::test_shield_adds_two
tests/test_armor_ac.py::test_unarmored_default
tests/test_armor_ac.py::test_strength_requirement_note
tests/test_attack_math.py::test_crit_damage_doubles_only_dice
tests/test_attack_math.py::test_offhand_crit_suppresses_mod_without_style
tests/test_attack_math.py::test_hit_probabilities_basic_and_extremes
tests/test_attacks_block.py::test_attacks_block_golden
tests/test_bestiary.py::test_load_goblin_minimal_fields
tests/test_bestiary.py::test_weapon_mapping_exists
tests/test_campaign_core.py::test_save_load_roundtrip
tests/test_campaign_core.py::test_travel_encounter_persists_hp

2025-09-24 10:25:51.055 [info] tests/test_campaign_core.py::test_long_rest_restores_hp
tests/test_campaign_core.py::test_quest_log_add_and_complete
tests/test_character.py::test_create_and_level
tests/test_character_derived.py::test_saves_and_skills
tests/test_character_derived.py::test_spell_slots_tables
tests/test_chroma_retrieval.py::test_monster_retrieval_from_chroma
tests/test_close_range_and_dash.py::test_ranged_in_melee_imposes_disadvantage
tests/test_close_range_and_dash.py::test_thrown_melee_is_not_penalized_in_melee
tests/test_close_range_and_dash.py::test_melee_dashes_when_one_move_cannot_reach
tests/test_close_range_and_dash.py::test_archer_dashes_to_kite_if_too_close
tests/test_combat_engine.py::test_basic_hit_and_damage_rolls_are_deterministic
tests/test_combat_engine.py::test_crit_doubles_dice_not_mod
tests/test_combat_engine.py::test_ammo_spend_and_out_of_ammo
tests/test_combat_engine.py::test_loading_enforced_once_per_turn
tests/test_combat_engine.py::test_range_and_cover_effects
tests/test_concentration.py::test_drops_on_failed_save_and_keeps_on_success
tests/test_concentration.py::test_dc_scales_with_damage_and_war_caster_advantage_is_noted
tests/test_concentration.py::test_concentration_auto_drops_on_unconscious
tests/test_conditions.py::test_poisoned_imposes_disadvantage_on_attacks
tests/test_conditions.py::test_restrained_gives_advantage_to_attackers_and_blocks_movement
tests/test_conditions.py::test_net_hit_applies_restrained_and_ai_attempts_escape
tests/test_death_saves.py::test_roll_sequence_stabilizes_or_dies_deterministically_with_seed
tests/test_death_saves.py::test_damage_while_down_causes_failures_and_death
tests/test_death_saves.py::test_round_runner_continues_until_death_or_stable
tests/test_death_saves.py::test_scene_logs_death_save_and_finish
tests/test_doctor.py::test_rules_doctor
2025-09-24 10:25:51.056 [info] 
tests/test_effects_engine.py::test_ignite_ticks_and_expires_json
tests/test_equipment_packs.py::test_starter_kits_add_items_and_langs_tools
tests/test_equipment_packs.py::test_cli_equip_unknown_preset_raises
tests/test_extra_attack.py::test_round_runner_two_swings
tests/test_extra_attack.py::test_loading_limits_to_one_per_action
tests/test_fighting_styles.py::test_archery_adds_to_ranged_attack_only
tests/test_fighting_styles.py::test_dueling_adds_plus2_damage_one_handed_only
tests/test_fighting_styles.py::test_dueling_disabled_if_offhand_weapon_present
tests/test_goblin_seed1.py::test_cli_help
tests/test_golden_effects.py::test_burning_pretty_golden
tests/test_golden_encounter.py::test_goblin_seed1_golden
tests/test_golden_play.py::test_attack_summary_json
tests/test_golden_play.py::test_hide_full_pretty
tests/test_grapple_shove.py::test_grapple_success_and_speed_zero
tests/test_grapple_shove.py::test_escape_fails_then_succeeds
tests/test_grapple_shove.py::test_prone_modifiers_melee_adv_ranged_disadv
tests/test_grapple_shove.py::test_shove_push_increases_distance_and_triggers_oa
tests/test_indexing_helpers.py::test_calculate_sha256
tests/test_indexing_helpers.py::test_load_and_save_hash_cache
tests/test_indexing_helpers.py::test_wipe_chroma_store
tests/test_indexing_helpers.py::test_flatten_field
tests/test_journal_phase9_bridge.py::test_log_event_persists_and_formats
tests/test_journal_phase9_bridge.py::test_cli_logging_and_journal_command
tests/test_opportunity_attacks.py::test_leaving_reach_without_disengage_triggers_oa
tests/test_opportunity_attacks.py::test_disengage_prevents_oa_at_5ft
tests/test_packs.py::test_pack_index_and_filter
tests/test_potions.py::test_potion_heals_and_consumes_one
tests/test_potions.py::test_cannot_drink_when_unconscious
tests/test_potions.py::test_ai_drinks_when_low_in_scene
tests/test_power_feats.py::test_sharpshooter_power_variant_math
tests/test_power_feats.py::test_gwm_power_variant_math
tests/test_power_feats.py::test_power_lines_appear_only_when_eligible

2025-09-24 10:25:51.056 [info] tests/test_power_feats.py::test_no_power_line_without_feat
tests/test_range_cover.py::test_long_range_imposes_disadvantage_without_ss
tests/test_range_cover.py::test_sharpshooter_cancels_long_range_disadvantage
tests/test_range_cover.py::test_cover_adds_to_ac_unless_ss_ignores
tests/test_range_cover.py::test_out_of_range_and_total_cover_unattackable
tests/test_range_cover.py::test_thrown_weapons_use_range_profile
tests/test_resistance_integration.py::test_runner_applies_resistance_and_thp
tests/test_resistance_temp_hp.py::test_resistance_halves_and_rounds_down_before_thp
tests/test_resistance_temp_hp.py::test_vulnerability_doubles
tests/test_resistance_temp_hp.py::test_immunity_zeroes_damage
tests/test_resistance_temp_hp.py::test_temp_hp_only_soaks_remaining
tests/test_resting.py::test_short_rest_spends_dice_and_caps_to_max_hp
tests/test_resting.py::test_short_rest_no_dice_left_heals_zero
tests/test_resting.py::test_long_rest_full_heal_and_regain_half_dice_drop_temp_hp_and_clear_conditions
tests/test_round_runner.py::test_melee_vs_melee_finishes_with_winner
tests/test_round_runner.py::test_archer_sharpshooter_ignores_cover_and_long_range
tests/test_round_runner.py::test_two_weapon_fighting_offhand_shows_and_can_finish
tests/test_rules_doctor.py::test_rules_doctor_runs
tests/test_rules_index.py::test_rules_index_rules_json
tests/test_rules_index.py::test_rules_index_legacy_data
tests/test_save_and_schema_roundtrip.py::test_roundtrip_pc_json
tests/test_scene_runner.py::test_melee_closes_then_hits
tests/test_scene_runner.py::test_archer_kites_out_of_melee_and_shoots
tests/test_scene_runner.py::test_reach_10ft_allows_earlier_hits
tests/test_sheet_markdown.py::test_sheet_md_contains_core_fields
2025-09-24 10:25:51.056 [info] 
tests/test_sheet_odds.py::test_odds_string_present_and_sane
tests/test_sheet_pdf.py::test_pdf_written
tests/test_sheet_polish.py::test_md_footer_and_caps
tests/test_sheet_polish.py::test_pdf_footer
tests/test_skirmish.py::test_2v2_finishes_with_a_winner
tests/test_skirmish.py::test_oas_can_fire_from_multiple_enemies_when_kiting
tests/test_slots_progressions.py::test_paladin_half_caster
tests/test_slots_progressions.py::test_ranger_half_caster
tests/test_slots_progressions.py::test_eldritch_knight_third_caster
tests/test_slots_progressions.py::test_arcane_trickster_third_caster
tests/test_special_actions.py::test_dodge_imposes_disadvantage_on_attack_against_defender
tests/test_special_actions.py::test_help_grants_adv_once_then_consumes_token
tests/test_special_actions.py::test_ready_structure_present_and_clears_on_start
tests/test_spellcasting.py::test_dc_and_attack_bonus
tests/test_spellcasting.py::test_learn_prepare_and_cast
tests/test_spellcasting.py::test_prepare_unknown_raises
tests/test_story_mode.py::test_story_sample
tests/test_two_weapon.py::test_offhand_no_style_suppresses_mod
tests/test_two_weapon.py::test_offhand_with_style_restores_mod
tests/test_two_weapon.py::test_attack_bonus_unchanged_for_offhand
tests/test_utils.py::test_strip_markup_removes_tags_and_formatting
tests/test_utils.py::test_normalize_name_cleans_markup_and_punctuation
tests/test_utils.py::test_fmt_sources_filters_and_joins
tests/test_utils.py::test_coerce_obj[Fireball-expected0]
tests/test_utils.py::test_coerce_obj[value1-expected1]
tests/test_utils.py::test_coerce_obj[value2-expected2]
2025-09-24 10:25:51.056 [info] 
tests/test_utils.py::test_coerce_obj[None-expected3]
tests/test_utils.py::test_ordinal[1-1st]
tests/test_utils.py::test_ordinal[2-2nd]
tests/test_utils.py::test_ordinal[3-3rd]
tests/test_utils.py::test_ordinal[4-4th]
tests/test_utils.py::test_ordinal[11-11th]
tests/test_utils.py::test_ordinal[-1--1st]
tests/test_utils.py::test_ordinal[abc-abc]
tests/test_utils.py::test_hit_text_handles_various_inputs
tests/test_validation.py::test_load_pc_ok
tests/test_validation.py::test_load_pc_schema_error
tests/test_validation.py::test_load_campaign_ok
tests/test_validation.py::test_load_campaign_schema_error
tests/test_versatile_display.py::test_longsword_shows_both_modes
tests/test_versatile_display.py::test_quarterstaff_shows_both_modes
tests/test_versatile_display.py::test_non_versatile_unchanged
tests/test_watch.py::test_debouncer
tests/test_weapon_notes.py::test_lance_notes_present
tests/test_weapon_notes.py::test_net_notes_present
tests/test_weapon_notes.py::test_loading_note_on_crossbow
tests/test_weapons.py::test_load_weapons
tests/test_weapons.py::test_finesse_picks_higher_mod

2025-09-24 10:25:51.056 [info] tests/test_weapons.py::test_ranged_uses_dex
tests/test_weapons.py::test_thrown_defaults_str
tests/test_weapons.py::test_thrown_finesse_allows_dex
tests/test_weapons.py::test_martial_no_proficiency
tests/test_weapons.py::test_versatile_two_handed_flag
tests/test_weapons.py::test_martial_finesse_no_proficiency
tests/test_weapons.py::test_ranged_negative_dex_penalty

2025-09-24 10:25:51.388 [info] 
=============================== tests coverage ================================
2025-09-24 10:25:51.398 [info] 
_______________ coverage: platform win32, python 3.11.0-final-0 _______________

Name                                 Stmts   Miss Branch BrPart  Cover   Missing
--------------------------------------------------------------------------------
grimbrain\engine\bestiary.py            29     18      6      0    31%   13-23, 27, 31-66, 70-71
grimbrain\engine\campaign.py           184     81     36      0    47%   63-112, 116-119, 130-139, 202-208, 211-213, 217-242, 246-248, 252-258, 262-270, 274-275
grimbrain\engine\encounters.py          59     46     22      0    16%   23-28, 32-37, 43-91
grimbrain\engine\loot.py                13     10      4      0    18%   7-16
grimbrain\engine\progression.py         50     43     18      0    10%   8-16, 20-26, 30-43, 47-65
grimbrain\engine\skirmish.py            74     59     28      0    15%   13, 17-22, 26, 30, 34, 38-41, 49-120
grimbrain\scripts\campaign_play.py     524    476    228      2     7%   7, 37, 73-76, 95-110, 114-120, 135-155, 161-163, 176-237, 246-256, 261, 266-279, 284-296, 322-612, 622-690, 704-725, 734-766, 771-824, 829-834, 838
--------------------------------------------------------------------------------
TOTAL                                  933    733    342      2    16%
FAIL Required test coverage of 60% not reached. Total coverage: 15.84%
200 tests collected in 19.34s

2025-09-24 10:35:53.211 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-24 10:35:53.211 [info] shell: commandPrompt
2025-09-24 10:35:53.377 [info] arg: --rootdir already exists in args, not adding.
2025-09-24 10:35:53.377 [info] Attempting to use temp directory for test ids file, file name: test-ids-5502d24555984753032c.txt
2025-09-24 10:35:53.384 [info] Environment variables set for pytest execution: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-results-63351c43aab4d938cea6, RUN_TEST_IDS_PIPE=C:\Users\gherr\AppData\Local\Temp\test-ids-5502d24555984753032c.txt
2025-09-24 10:35:53.384 [info] Running pytest with arguments: c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=c:\dev\grimbrain for workspace c:\dev\grimbrain 

2025-09-24 10:35:53.384 [info] > .\venv311\Scripts\python.exe ~\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files\vscode_pytest\run_pytest_script.py --rootdir=.
2025-09-24 10:35:53.384 [info] cwd: .
2025-09-24 13:37:14.431 [info] Experiment 'pythonSurveyNotification' is active
2025-09-24 13:37:14.432 [info] Native locator: Refresh started
2025-09-24 13:37:14.514 [info] Native locator: Refresh started
2025-09-24 13:37:14.653 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-24 13:37:17.350 [info] > pyenv which python
2025-09-24 13:37:17.351 [info] cwd: .
2025-09-24 13:37:17.671 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-24 13:37:18.097 [info] Native locator: Refresh finished in 4040 ms
2025-09-24 13:37:20.222 [info] Starting Pylance language server.
2025-09-24 13:38:05.328 [info] Experiment 'pythonSurveyNotification' is active
2025-09-24 13:38:05.328 [info] Native locator: Refresh started
2025-09-24 13:38:05.475 [info] Native locator: Refresh started
2025-09-24 13:38:05.488 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-24 13:38:08.317 [info] > pyenv which python
2025-09-24 13:38:08.317 [info] cwd: .
2025-09-24 13:38:08.581 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-24 13:38:09.052 [info] Native locator: Refresh finished in 3977 ms
2025-09-24 13:38:11.380 [info] Starting Pylance language server.
2025-09-24 13:40:16.245 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pkg_resources\tests\data\my-test-package-source\setup.cfg
2025-09-24 13:40:16.279 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 13:40:16.280 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-b63d2b92678bd18df634
2025-09-24 13:40:16.341 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-24 13:40:16.341 [info] shell: commandPrompt
2025-09-24 13:40:16.675 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 13:40:16.675 [info] cwd: .
2025-09-24 13:40:18.398 [error] Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pytest\__main__.py", line 9, in <module>

2025-09-24 13:40:18.399 [error]     raise SystemExit(pytest.console_main())
                     ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main
    code = main()
  
2025-09-24 13:40:18.399 [error]          ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 156, in main

2025-09-24 13:40:18.399 [error]     config = _prepareconfig(args, plugins)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

2025-09-24 13:40:18.399 [error]   File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 342, in _prepareconfig

2025-09-24 13:40:18.399 [error]     config = pluginmanager.hook.pytest_cmdline_parse(
             
2025-09-24 13:40:18.399 [error] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_hooks.py", line 512, in __call__

2025-09-24 13:40:18.400 [error]     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^
2025-09-24 13:40:18.400 [error] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

2025-09-24 13:40:18.400 [error]   File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec

2025-09-24 13:40:18.400 [error]     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
    
2025-09-24 13:40:18.400 [error]        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 167, in _multicall

2025-09-24 13:40:18.400 [error]     raise exception
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 139, in _multicall

2025-09-24 13:40:18.400 [error]     teardown.throw(exception)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\helpconfig.py", line 112, in pytest_cmdline_parse

2025-09-24 13:40:18.411 [error]     config = yield
             ^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 121, in _multicall

2025-09-24 13:40:18.412 [error]     res = hook_impl.function(*args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1146, in pytest_cmdline_parse

2025-09-24 13:40:18.412 [error]     self.parse(args)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1530, in parse

2025-09-24 13:40:18.412 [error]     args = self._parser.parse_setoption(
           ^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:40:18.412 [error] ^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 141, in parse_setoption

2025-09-24 13:40:18.425 [error]     parsedoption = self.parse(args, namespace=namespace)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 111, in parse

2025-09-24 13:40:18.425 [error]     self.optparser = self._getparser()
                     ^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 128, in _getparser

2025-09-24 13:40:18.425 [error]     arggroup.add_argument(*n, **a)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1461, in add_argument

2025-09-24 13:40:18.442 [error]     return self._add_action(action)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1663, in _add_action

2025-09-24 13:40:18.443 [error]     action = super(_ArgumentGroup, self)._add_action(action)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:40:18.443 [error] ^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1475, in _add_action

2025-09-24 13:40:18.443 [error]     self._check_conflict(action)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1612, in _check_conflict

2025-09-24 13:40:18.444 [error]     conflict_handler(action, confl_optionals)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1621, in _handle_conflict_error

2025-09-24 13:40:18.444 [error]     raise ArgumentError(action, message % conflict_string)
argparse.ArgumentError
2025-09-24 13:40:18.444 [error] : argument --cov: conflicting option string: --cov

2025-09-24 13:40:18.525 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain.
2025-09-24 13:40:18.525 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain. Creating and sending error discovery payload
2025-09-24 13:40:18.525 [error] pytest test discovery error for workspace:  c:\dev\grimbrain 
  
 The python test process was terminated before it could exit on its own, the process errored with: Code: 1, Signal: null for workspace c:\dev\grimbrain
2025-09-24 13:40:45.692 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\numpy\f2py\setup.cfg
2025-09-24 13:40:45.807 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 13:40:45.831 [info] arg: --rootdir already exists in args, not adding.
2025-09-24 13:40:45.831 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-384fe513c726a05c27e4
2025-09-24 13:40:45.835 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 13:40:45.835 [info] cwd: .
2025-09-24 13:40:46.948 [error] Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pytest\__main__.py", line 9, in <module>

2025-09-24 13:40:46.948 [error]     raise SystemExit(pytest.console_main())
                     ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main

2025-09-24 13:40:46.948 [error]     code = main()
         
2025-09-24 13:40:46.948 [error]   ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 156, in main

2025-09-24 13:40:46.949 [error]     config = _prepareconfig(args, plugins)

2025-09-24 13:40:46.949 [error]              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 342, in _prepareconfig

2025-09-24 13:40:46.949 [error]     config = pluginmanager.hook.pytest_cmdline_parse(
             ^^^^^
2025-09-24 13:40:46.949 [error] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_hooks.py", line 512, in __call__

2025-09-24 13:40:46.949 [error]     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)

2025-09-24 13:40:46.950 [error]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:40:46.950 [error] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec

2025-09-24 13:40:46.950 [error]     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)

2025-09-24 13:40:46.950 [error]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:40:46.950 [error] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 167, in _multicall

2025-09-24 13:40:46.950 [error]     raise exception

2025-09-24 13:40:46.950 [error]   File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 139, in _multicall

2025-09-24 13:40:46.950 [error]     teardown.throw(exception)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\helpconfig.py", line 112, in pytest_cmdline_parse

2025-09-24 13:40:46.951 [error]     config = yield
         
2025-09-24 13:40:46.951 [error]     ^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 121, in _multicall

2025-09-24 13:40:46.951 [error]     res = hook_impl.function(*args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1146, in pytest_cmdline_parse

2025-09-24 13:40:46.951 [error]     self.parse(args)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1530, in parse

2025-09-24 13:40:46.951 [error]     args = self._parser.parse_setoption(
        
2025-09-24 13:40:46.952 [error]    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 141, in parse_setoption

2025-09-24 13:40:46.952 [error]     parsedoption = self.parse(args, namespace=namespace)

2025-09-24 13:40:46.952 [error]                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 111, in parse

2025-09-24 13:40:46.952 [error]     self.optparser = self._getparser()
           
2025-09-24 13:40:46.952 [error]           ^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 128, in _getparser

2025-09-24 13:40:46.952 [error]     arggroup.add_argument(*n, **a)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1461, in add_argument

2025-09-24 13:40:46.952 [error]     return self._add_action(action)
    
2025-09-24 13:40:46.953 [error]        ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1663, in _add_action

2025-09-24 13:40:46.953 [error]     action = super(_ArgumentGroup, self)._add_action(action)

2025-09-24 13:40:46.953 [error]              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1475, in _add_action

2025-09-24 13:40:46.954 [error]     self._check_conflict(action)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1612, in _check_conflict

2025-09-24 13:40:46.954 [error]     conflict_handler(action, confl_optionals)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1621, in _handle_conflict_error

2025-09-24 13:40:46.955 [error]     raise ArgumentError(action, message % conflict_string)
argparse.ArgumentError
2025-09-24 13:40:46.955 [error] : argument --cov: conflicting option string: --cov

2025-09-24 13:40:47.040 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain.
2025-09-24 13:40:47.040 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain. Creating and sending error discovery payload
2025-09-24 13:40:47.040 [error] pytest test discovery error for workspace:  c:\dev\grimbrain 
  
 The python test process was terminated before it could exit on its own, the process errored with: Code: 1, Signal: null for workspace c:\dev\grimbrain
2025-09-24 13:43:50.919 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\pandas\pyproject.toml
2025-09-24 13:43:51.197 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 13:43:51.197 [info] arg: --rootdir already exists in args, not adding.
2025-09-24 13:43:51.198 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-a156fb9a84c1c8ace603
2025-09-24 13:43:51.202 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 13:43:51.202 [info] cwd: .
2025-09-24 13:43:52.857 [error] Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pytest\__main__.py", line 9, in <module>

2025-09-24 13:43:52.857 [error]     raise SystemExit(pytest.console_main())

2025-09-24 13:43:52.857 [error]                      ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main

2025-09-24 13:43:52.857 [error]     code = main()
          
2025-09-24 13:43:52.857 [error]  ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 156, in main

2025-09-24 13:43:52.857 [error]     config = _prepareconfig(args, plugins)
     
2025-09-24 13:43:52.858 [error]         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 342, in _prepareconfig

2025-09-24 13:43:52.858 [error]     config = pluginmanager.hook.pytest_cmdline_parse(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:43:52.858 [error] ^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_hooks.py", line 512, in __call__

2025-09-24 13:43:52.858 [error]     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)

2025-09-24 13:43:52.859 [error]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec

2025-09-24 13:43:52.859 [error]     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)

2025-09-24 13:43:52.859 [error]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:43:52.859 [error] ^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 167, in _multicall

2025-09-24 13:43:52.859 [error]     raise exception
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 139, in _multicall

2025-09-24 13:43:52.859 [error]     teardown.throw(exception)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\helpconfig.py", line 112, in pytest_cmdline_parse

2025-09-24 13:43:52.860 [error]     config = yield
             
2025-09-24 13:43:52.860 [error] ^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 121, in _multicall

2025-09-24 13:43:52.860 [error]     res = hook_impl.function(*args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1146, in pytest_cmdline_parse

2025-09-24 13:43:52.861 [error]     self.parse(args)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1530, in parse

2025-09-24 13:43:52.861 [error]     args = self._parser.parse_setoption(
           ^^^^^^^^
2025-09-24 13:43:52.861 [error] ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 141, in parse_setoption

2025-09-24 13:43:52.861 [error]     parsedoption = self.parse(args, namespace=namespace)

2025-09-24 13:43:52.862 [error]                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:43:52.862 [error] ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 111, in parse

2025-09-24 13:43:52.862 [error]     self.optparser = self._getparser()
                     ^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 128, in _getparser

2025-09-24 13:43:52.862 [error]     arggroup.add_argument(*n, **a)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1461, in add_argument

2025-09-24 13:43:52.863 [error]     return self._add_action(action)
           ^^
2025-09-24 13:43:52.863 [error] ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1663, in _add_action

2025-09-24 13:43:52.864 [error]     action = super(_ArgumentGroup, self)._add_action(action)

2025-09-24 13:43:52.864 [error]              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1475, in _add_action

2025-09-24 13:43:52.865 [error]     self._check_conflict(action)

2025-09-24 13:43:52.865 [error]   File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1612, in _check_conflict

2025-09-24 13:43:52.866 [error]     conflict_handler(action, confl_optionals)

2025-09-24 13:43:52.866 [error]   File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1621, in _handle_conflict_error

2025-09-24 13:43:52.867 [error]     raise ArgumentError(action, message % conflict_string)
argparse.ArgumentError
2025-09-24 13:43:52.867 [error] : argument --cov: conflicting option string: --cov

2025-09-24 13:43:52.965 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain.
2025-09-24 13:43:52.965 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain. Creating and sending error discovery payload
2025-09-24 13:43:52.965 [error] pytest test discovery error for workspace:  c:\dev\grimbrain 
  
 The python test process was terminated before it could exit on its own, the process errored with: Code: 1, Signal: null for workspace c:\dev\grimbrain
2025-09-24 13:44:20.076 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain\venv311\Lib\site-packages\~andas\pyproject.toml
2025-09-24 13:44:20.077 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 13:44:20.077 [info] arg: --rootdir already exists in args, not adding.
2025-09-24 13:44:20.078 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-b05d552c75a9e224ec22
2025-09-24 13:44:20.082 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 13:44:20.083 [info] cwd: .
2025-09-24 13:44:21.281 [error] Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pytest\__main__.py", line 9, in <module>

2025-09-24 13:44:21.281 [error]     raise SystemExit(pytest.console_main())
 
2025-09-24 13:44:21.281 [error]                     ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main

2025-09-24 13:44:21.281 [error]     code = main()
           ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 156, in main

2025-09-24 13:44:21.282 [error]     config = _prepareconfig(args, plugins)
     
2025-09-24 13:44:21.282 [error]         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 342, in _prepareconfig

2025-09-24 13:44:21.282 [error]     config = pluginmanager.hook.pytest_cmdline_parse(
             ^^^
2025-09-24 13:44:21.282 [error] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_hooks.py", line 512, in __call__

2025-09-24 13:44:21.282 [error]     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
     
2025-09-24 13:44:21.283 [error]       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec

2025-09-24 13:44:21.283 [error]     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:44:21.283 [error] ^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 167, in _multicall

2025-09-24 13:44:21.283 [error]     raise exception
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 139, in _multicall

2025-09-24 13:44:21.283 [error]     teardown.throw(exception)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\helpconfig.py", line 112, in pytest_cmdline_parse

2025-09-24 13:44:21.284 [error]     config = yield
   
2025-09-24 13:44:21.284 [error]           ^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 121, in _multicall

2025-09-24 13:44:21.284 [error]     res = hook_impl.function(*args)

2025-09-24 13:44:21.284 [error]           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1146, in pytest_cmdline_parse

2025-09-24 13:44:21.285 [error]     self.parse(args)

2025-09-24 13:44:21.285 [error]   File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1530, in parse

2025-09-24 13:44:21.285 [error]     args = self._parser.parse_setoption(
           ^^^^
2025-09-24 13:44:21.285 [error] ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 141, in parse_setoption

2025-09-24 13:44:21.286 [error]     parsedoption = self.parse(args, namespace=namespace)

2025-09-24 13:44:21.286 [error]                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:44:21.286 [error] ^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 111, in parse

2025-09-24 13:44:21.286 [error]     self.optparser = self._getparser()
     
2025-09-24 13:44:21.286 [error]                 ^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 128, in _getparser

2025-09-24 13:44:21.286 [error]     arggroup.add_argument(*n, **a)

2025-09-24 13:44:21.287 [error]   File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1461, in add_argument

2025-09-24 13:44:21.287 [error]     return self._add_action(action)
 
2025-09-24 13:44:21.287 [error]           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1663, in _add_action

2025-09-24 13:44:21.288 [error]     action = super(_ArgumentGroup, self)._add_action(action)

2025-09-24 13:44:21.289 [error]              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1475, in _add_action

2025-09-24 13:44:21.290 [error]     self._check_conflict(action)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1612, in _check_conflict

2025-09-24 13:44:21.291 [error]     conflict_handler(action, confl_optionals)

2025-09-24 13:44:21.291 [error]   File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1621, in _handle_conflict_error

2025-09-24 13:44:21.292 [error]     raise ArgumentError(action, message % conflict_string)

2025-09-24 13:44:21.292 [error] argparse.ArgumentError: argument --cov: conflicting option string: --cov

2025-09-24 13:44:21.403 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain.
2025-09-24 13:44:21.403 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain. Creating and sending error discovery payload
2025-09-24 13:44:21.403 [error] pytest test discovery error for workspace:  c:\dev\grimbrain 
  
 The python test process was terminated before it could exit on its own, the process errored with: Code: 1, Signal: null for workspace c:\dev\grimbrain
2025-09-24 13:57:07.555 [info] Experiment 'pythonSurveyNotification' is active
2025-09-24 13:57:07.555 [info] Native locator: Refresh started
2025-09-24 13:57:07.589 [info] Native locator: Refresh started
2025-09-24 13:57:07.700 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-24 13:57:10.304 [info] > pyenv which python
2025-09-24 13:57:10.304 [info] cwd: .
2025-09-24 13:57:11.063 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-24 13:57:11.063 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-24 13:57:11.139 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 13:57:11.311 [info] Native locator: Refresh finished in 4156 ms
2025-09-24 13:57:11.322 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-9d0fa1b831788e90dfd7
2025-09-24 13:57:11.451 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-24 13:57:11.452 [info] shell: commandPrompt
2025-09-24 13:57:11.927 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 13:57:11.928 [info] cwd: .
2025-09-24 13:57:13.373 [error] Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pytest\__main__.py", line 9, in <module>

2025-09-24 13:57:13.373 [error]     raise SystemExit(pytest.console_main())
                     ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main
    code = main()
           ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 156, in main

2025-09-24 13:57:13.374 [error]     config = _prepareconfig(args, plugins)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 342, in _prepareconfig

2025-09-24 13:57:13.374 [error]     config = pluginmanager.hook.pytest_cmdline_parse(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-09-24 13:57:13.374 [error] ^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_hooks.py", line 512, in __call__

2025-09-24 13:57:13.374 [error]     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)

2025-09-24 13:57:13.375 [error]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec

2025-09-24 13:57:13.375 [error]     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
         
2025-09-24 13:57:13.375 [error]   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 167, in _multicall

2025-09-24 13:57:13.375 [error]     raise exception
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 139, in _multicall

2025-09-24 13:57:13.375 [error]     teardown.throw(exception)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\helpconfig.py", line 112, in pytest_cmdline_parse

2025-09-24 13:57:13.376 [error]     config = yield
             ^^^
2025-09-24 13:57:13.376 [error] ^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 121, in _multicall

2025-09-24 13:57:13.376 [error]     res = hook_impl.function(*args)
          ^^^^^^^^^^^^^^^^^^^
2025-09-24 13:57:13.376 [error] ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1146, in pytest_cmdline_parse

2025-09-24 13:57:13.376 [error]     self.parse(args)

2025-09-24 13:57:13.376 [error]   File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1530, in parse

2025-09-24 13:57:13.377 [error]     args = self._parser.parse_setoption(
           ^^^^^^^^^^
2025-09-24 13:57:13.377 [error] ^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 141, in parse_setoption

2025-09-24 13:57:13.377 [error]     parsedoption = self.parse(args, namespace=namespace)

2025-09-24 13:57:13.377 [error]                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 111, in parse

2025-09-24 13:57:13.377 [error]     self.optparser = self._getparser()
                     ^^^^^^^^^^^^^^^^^
2025-09-24 13:57:13.378 [error] 
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 128, in _getparser

2025-09-24 13:57:13.378 [error]     arggroup.add_argument(*n, **a)

2025-09-24 13:57:13.378 [error]   File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1461, in add_argument

2025-09-24 13:57:13.378 [error]     return self._add_action(action)

2025-09-24 13:57:13.378 [error]            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1663, in _add_action

2025-09-24 13:57:13.379 [error]     action = super(_ArgumentGroup, self)._add_action(action)
   
2025-09-24 13:57:13.379 [error]           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1475, in _add_action

2025-09-24 13:57:13.382 [error]     self._check_conflict(action)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1612, in _check_conflict
    conflict_handler(action, confl_optionals)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1621, in _handle_conflict_error
    raise ArgumentError(action, message % conflict_string)
argparse.ArgumentError: argument --cov: conflicting option string: --cov

2025-09-24 13:57:13.484 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain.
2025-09-24 13:57:13.484 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain. Creating and sending error discovery payload
2025-09-24 13:57:13.484 [error] pytest test discovery error for workspace:  c:\dev\grimbrain 
  
 The python test process was terminated before it could exit on its own, the process errored with: Code: 1, Signal: null for workspace c:\dev\grimbrain
2025-09-24 13:57:13.777 [info] Starting Pylance language server.
2025-09-24 14:00:30.078 [info] Experiment 'pythonSurveyNotification' is active
2025-09-24 14:00:30.078 [info] Native locator: Refresh started
2025-09-24 14:00:30.251 [info] Native locator: Refresh finished in 418 ms
2025-09-24 14:00:32.519 [info] Native locator: Refresh started
2025-09-24 14:00:32.548 [info] Skipping ActivatedEnv Detection:  process.env.VSCODE_CLI !== '1'
2025-09-24 14:00:33.572 [info] > pyenv which python
2025-09-24 14:00:33.572 [info] cwd: .
2025-09-24 14:00:33.601 [info] Python interpreter path: .\venv311\Scripts\python.exe
2025-09-24 14:00:34.309 [info] Native locator: Refresh finished in 1791 ms
2025-09-24 14:00:36.435 [info] Starting Pylance language server.
2025-09-24 14:00:45.094 [info] Discover tests for workspace name: grimbrain - uri: c:\dev\grimbrain
2025-09-24 14:00:45.096 [warning] The cwd resolves to a different path, checking if it has a symbolic link somewhere in its path.
2025-09-24 14:00:45.097 [info] Environment variables set for pytest discovery: PYTHONPATH=c:\Users\gherr\.vscode\extensions\ms-python.python-2025.14.0-win32-x64\python_files, TEST_RUN_PIPE=\\.\pipe\python-test-discovery-77a1e6fe8bbdfb58ecd8
2025-09-24 14:00:45.145 [info] > ./venv311/Scripts/activate.bat && echo 'e8b39361-0157-4923-80e1-22d70d46dee6' && python ~/.vscode/extensions/ms-python.python-2025.14.0-win32-x64/python_files/printEnvVariables.py
2025-09-24 14:00:45.145 [info] shell: commandPrompt
2025-09-24 14:00:45.302 [info] > .\venv311\Scripts\python.exe -m pytest -p vscode_pytest --collect-only tests --rootdir=.
2025-09-24 14:00:45.302 [info] cwd: .
2025-09-24 14:00:46.247 [error] Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pytest\__main__.py", line 9, in <module>

2025-09-24 14:00:46.248 [error]     raise SystemExit(pytest.console_main())
                     ^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main
    code = main()

2025-09-24 14:00:46.250 [error]            ^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 156, in main
    config = _prepareconfig(args, plugins)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 342, in _prepareconfig

2025-09-24 14:00:46.250 [error]     config = pluginmanager.hook.pytest_cmdline_parse(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_hooks.py", line 512, in __call__

2025-09-24 14:00:46.251 [error]     return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec

2025-09-24 14:00:46.252 [error]     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 167, in _multicall

2025-09-24 14:00:46.253 [error]     raise exception
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 139, in _multicall

2025-09-24 14:00:46.254 [error]     teardown.throw(exception)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\helpconfig.py", line 112, in pytest_cmdline_parse

2025-09-24 14:00:46.255 [error]     config = yield
             ^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\pluggy\_callers.py", line 121, in _multicall
    res = hook_impl.function(*args)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1146, in pytest_cmdline_parse

2025-09-24 14:00:46.255 [error]     self.parse(args)
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\__init__.py", line 1530, in parse

2025-09-24 14:00:46.255 [error]     args = self._parser.parse_setoption(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 141, in parse_setoption

2025-09-24 14:00:46.256 [error]     parsedoption = self.parse(args, namespace=namespace)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 111, in parse

2025-09-24 14:00:46.256 [error]     self.optparser = self._getparser()
                     ^^^^^^^^^^^^^^^^^
  File "C:\dev\grimbrain\venv311\Lib\site-packages\_pytest\config\argparsing.py", line 128, in _getparser

2025-09-24 14:00:46.256 [error]     arggroup.add_argument(*n, **a)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1461, in add_argument

2025-09-24 14:00:46.257 [error]     return self._add_action(action)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1663, in _add_action

2025-09-24 14:00:46.258 [error]     action = super(_ArgumentGroup, self)._add_action(action)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1475, in _add_action

2025-09-24 14:00:46.258 [error]     self._check_conflict(action)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1612, in _check_conflict

2025-09-24 14:00:46.259 [error]     conflict_handler(action, confl_optionals)
  File "C:\Users\gherr\AppData\Local\Programs\Python\Python311\Lib\argparse.py", line 1621, in _handle_conflict_error

2025-09-24 14:00:46.260 [error]     raise ArgumentError(action, message % conflict_string)
argparse.ArgumentError
2025-09-24 14:00:46.260 [error] : argument --cov: conflicting option string: --cov

2025-09-24 14:00:46.363 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain.
2025-09-24 14:00:46.363 [error] Subprocess exited unsuccessfully with exit code 1 and signal null on workspace c:\dev\grimbrain. Creating and sending error discovery payload
2025-09-24 14:00:46.363 [error] pytest test discovery error for workspace:  c:\dev\grimbrain 
  
 The python test process was terminated before it could exit on its own, the process errored with: Code: 1, Signal: null for workspace c:\dev\grimbrain
